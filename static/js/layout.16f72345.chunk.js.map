{"version":3,"sources":["assets/images/user.jpg","layout/menuConfig.ts","layout/header.jsx","components/common/customIcon.tsx","components/sideMenu/sideMenu.jsx","layout/side.jsx","layout/footer.jsx","routes/index.ts","layout/index.jsx","store/actionCreators.ts"],"names":["module","exports","menuConfig","key","title","icon","auth","subs","Header","Layout","React","memo","props","menuClick","menuToggle","loginOut","menu","ItemGroup","Divider","Item","UserOutlined","SettingOutlined","onClick","LogoutOutlined","className","span","createElement","MenuUnfoldOutlined","MenuFoldOutlined","rel","href","target","GithubOutlined","dot","NotificationOutlined","overlay","trigger","style","backgroundColor","iconMap","HomeOutlined","AppstoreOutlined","BarsOutlined","FormOutlined","ProfileOutlined","AlertOutlined","RocketOutlined","CustomIcon","SideMenu","getOpenKeys","string","strArr","split","map","p","newStr","newArr","i","j","length","push","onOpenChange","keys","setState","openKeys","latestOpenKey","includes","renderMenuItem","to","renderSubMenu","SubMenu","item","state","selectedKeys","pathname","this","location","preProps","prevState","mode","theme","Component","withRouter","Sider","PageSide","collapsible","collapsed","Footer","PageFooter","Date","getFullYear","Home","loadable","routes","path","exact","name","component","Content","PageLayout","checkLogin","loginInfo","getLoginInfo","username","genMenu","goToLogin","localStorage","removeItem","message","success","history","JSON","parse","getItem","filter","travel","node","valid","v","concat","forEach","Array","isArray","avatarUrl","marginLeft","minHeight","avatar","authList","render","connect","dispatch","type","MENU_TOGGLE"],"mappings":"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","file":"static/js/layout.16f72345.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user.bbb60c89.jpg\";","const menuConfig = [\n  {\n    key: '/index',\n    title: '首页',\n    icon: 'HomeOutlined',\n    auth: [1]\n  },\n  {\n    title: '通用',\n    key: '/public',\n    icon: 'appstore',\n    auth: [1],\n    subs: [\n      { title: '按钮', key: '/public/button', icon: '' }, \n      { title: '图标', key: '/public/icon', icon: '' }\n    ]\n  },\n  {\n    title: '导航',\n    key: '/nav',\n    icon: 'AppstoreOutlined',\n    subs: [\n      { title: '下拉菜单', key: '/nav/dropdown', icon: '' },\n      { title: '导航菜单', key: '/nav/menu', icon: '' },\n      { title: '步骤条', key: '/nav/steps', icon: '' }\n    ]\n  },\n  {\n    title: '表单',\n    key: '/form',\n    icon: 'FormOutlined',\n    subs: [\n      { title: '基础表单', key: '/form/base-form', icon: '' },\n      { title: '步骤表单', key: '/form/step-form', icon: '' }\n    ]\n  },\n  {\n    title: '展示',\n    key: '/show',\n    icon: 'BarsOutlined',\n    subs: [\n      { title: '表格', key: '/show/table', icon: '' },\n      { title: '折叠面板', key: '/show/collapse', icon: '' },\n      { title: '树形控件', key: '/show/tree', icon: '' },\n      { title: '标签页', key: '/show/tabs', icon: '' }\n    ]\n  },\n  {\n    title: '异常页面',\n    key: '/exception',\n    icon: 'AlertOutlined',\n    auth: [1],\n    subs: [\n      { title: '404', key: '/404', icon: '' },\n      { title: '500', key: '/500', icon: '' },\n      {\n        title: '二级',\n        key: '/exception/2',\n        icon: '',\n        subs: [{ title: '三级', key: '/exception/2/403', icon: '' }]\n      }\n    ]\n  },\n  {\n    title: '关于',\n    key: '/about',\n    icon: 'ProfileOutlined',\n    auth: [1]\n  }\n];\n\nexport default menuConfig;","import React from 'react';\nimport PropTypes from \"prop-types\";\nimport { Menu, Dropdown, Layout, Row, Col, Avatar, Badge } from \"antd\";\nimport {\n  UserOutlined,\n  SettingOutlined,\n  LogoutOutlined,\n  MenuFoldOutlined,\n  MenuUnfoldOutlined,\n  GithubOutlined,\n  NotificationOutlined\n} from '@ant-design/icons';\n\nconst { Header } = Layout;\n\nfunction PageHeader(props) {\n  const { menuClick, menuToggle, loginOut } = props;\n  const menu = (\n    <Menu>\n      <Menu.ItemGroup title='用户设置'>\n        <Menu.Divider />\n        <Menu.Item>\n          <UserOutlined />\n          个人设置\n        </Menu.Item>\n        <Menu.Item>\n          <SettingOutlined />\n          系统设置\n        </Menu.Item>\n      </Menu.ItemGroup>\n      <Menu.Divider />\n      <Menu.Item>\n        <span onClick={loginOut}>\n          <LogoutOutlined />\n          退出登录\n        </span>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Header className=\"app-header\">\n      <Row>\n        <Col span={12}>\n          {React.createElement(menuToggle ? MenuUnfoldOutlined : MenuFoldOutlined, {\n            className: 'side-trigger',\n            onClick: menuClick,\n          })}\n        </Col>\n        <Col span={12} className=\"header-right\">\n          <div className=\"github-btn btn-item\">\n            <a rel='noopener noreferrer' href='https://github.com/niexias/react-ant-admin' target='_blank'>\n              <GithubOutlined />\n            </a>\n          </div>\n          <div className=\"notify-btn btn-item\">\n            <Badge dot>\n              <a href=\"/#/index\">\n                <NotificationOutlined />\n              </a>\n            </Badge>\n          </div>\n          <div className=\"user-btn btn-item\">\n            <Dropdown \n              overlay={menu}\n              trigger=\"['click']\">\n              <Avatar style={{ backgroundColor: '#87d068' }} icon={<UserOutlined />} />\n            </Dropdown>\n          </div>\n        </Col>\n      </Row>\n    </Header>\n  )\n}\n\nPageHeader.propTypes = {\n  menuClick: PropTypes.func,\n  avatar: PropTypes.string,\n  menuToggle: PropTypes.bool,\n  loginOut: PropTypes.func\n}\n\nexport default React.memo(PageHeader);","import React from \"react\";\nimport {\n  HomeOutlined,\n  AppstoreOutlined,\n  FormOutlined,\n  BarsOutlined,\n  ProfileOutlined,\n  AlertOutlined,\n  SettingOutlined,\n  RocketOutlined\n} from '@ant-design/icons';\n\nconst iconMap: {[key: string]: any} = {\n  HomeOutlined: <HomeOutlined />,\n  AppstoreOutlined:<AppstoreOutlined />,\n  BarsOutlined: <BarsOutlined />,\n  FormOutlined: <FormOutlined />,\n  ProfileOutlined: <ProfileOutlined />,\n  AlertOutlined: <AlertOutlined />,\n  SettingOutlined: <SettingOutlined />,\n  RocketOutlined: <RocketOutlined />\n};\n\ntype CustomIconProps = {\n  icon: string\n}\n\nfunction CustomIcon(props: CustomIconProps){\n  const { icon } = props;\n  return iconMap[icon] ? iconMap[icon] : iconMap['RocketOutlined'];\n}\n\nexport default CustomIcon;","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { Menu } from \"antd\";\nimport CustomIcon from \"../common/customIcon\";\n// import { UserOutlined, LockOutlined } from '@ant-design/icons';\n\nclass SideMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      openKeys: [],\n      selectedKeys: []\n    };\n  }\n\n  componentDidMount() {\n    const { pathname } = this.props.location;\n    this.setState({\n      selectedKeys: [pathname],\n      openKeys: this.getOpenKeys(pathname)\n    });\n  }\n\n  componentDidUpdate(preProps, prevState) {\n    const { pathname } = this.props.location;\n    const { pathname: prePathname } = preProps.location;\n    if (prePathname !== pathname) {\n      this.setState({\n        selectedKeys: [pathname],\n        openKeys: this.getOpenKeys(pathname)\n      })\n    }\n  }\n\n  /**\n   * 获取 path 的数组\n   */\n  getOpenKeys = string => {\n    if (!string) return [];\n    let strArr = string.split('/').map(p => `/${p}`),\n        newStr = '',\n        newArr = [];\n    for (let i = 1, j = strArr.length - 1; i < j; i++) {\n      newStr += strArr[i];\n      newArr.push(newStr);\n    }\n    return newArr;\n  }\n\n  /**\n   * 展开一个菜单\n   */\n  onOpenChange = (keys = []) => {\n    const { length } = keys;\n    if (length < 2) {\n      this.setState({\n        openKeys: keys\n      });\n      return;\n    }\n    // 最新展开的菜单\n    const latestOpenKey = keys[length - 1];\n    // 判断是否是嵌套的多级菜单\n    latestOpenKey.includes(keys[0])\n      ? this.setState({ openKeys: keys })\n      : this.setState({ openKeys: [latestOpenKey] })\n  }\n\n  renderMenuItem = ({ key, icon, title }) => {\n    return (\n      <Menu.Item key={key}>\n        <Link to={key}>\n          {icon && <CustomIcon icon={icon}/>}\n          <span>{title}</span>\n        </Link>\n      </Menu.Item>\n    )\n  }\n\n  renderSubMenu = ({ key, icon, title, subs }) => {\n    const { renderMenuItem, renderSubMenu } = this;\n    return (\n      <Menu.SubMenu\n        key={key}\n        title={\n          <span>\n            {icon && <CustomIcon icon={icon} />}\n            <span>{title}</span>\n          </span>\n        }>\n        {\n          subs && subs.map(item => item.subs && item.subs.length > 0 ? renderSubMenu(item) : renderMenuItem(item))\n        }\n      </Menu.SubMenu>\n    )\n  }\n\n  render() {\n    const { openKeys, selectedKeys } = this.state;\n    const { renderMenuItem, renderSubMenu } = this;\n    return (\n      <Menu\n        mode='inline'\n        theme='dark'\n        openKeys={openKeys}\n        selectedKeys={selectedKeys}\n        onClick={({ key }) => this.setState({ selectedKeys: [key] })}\n        onOpenChange={this.onOpenChange}>\n        {\n          this.props.menu && this.props.menu.map(item => {\n            const { subs } = item;\n            return subs && subs.length > 0 ? renderSubMenu(item) : renderMenuItem(item);\n          })\n        }\n      </Menu>\n    )\n  }\n}\n\nSideMenu.propTypes = {\n  menu: PropTypes.array.isRequired\n}\n\nexport default withRouter(SideMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Layout } from \"antd\";\nimport { GithubOutlined } from '@ant-design/icons';\nimport SideMenu from \"../components/sideMenu/sideMenu\";\n\nconst { Sider } = Layout;\n\nfunction PageSide(props) {\n  let { menuToggle, menu } = props;\n  return (\n    <Sider trigger={null} className=\"app-side\" collapsible collapsed={menuToggle}>\n      <div className=\"side-logo\">\n        <a rel='noopener noreferrer' href='https://github.com/niexias' target='_blank'>\n          <GithubOutlined />\n        </a>\n      </div>\n      <SideMenu menu={menu}/>\n    </Sider>\n  )\n}\n\nPageSide.propTypes = {\n  menuToggle: PropTypes.bool,\n  menu: PropTypes.array.isRequired\n}\n\nexport default PageSide;","import React from 'react'\nimport { Layout } from \"antd\";\n\nconst { Footer } = Layout;\n\nfunction PageFooter() {\n  return (\n    <Footer className=\"app-footer\">\n      react-ant-admin &copy; 2020-{new Date().getFullYear()} Created by niexias\n    </Footer>\n  );\n}\n\nexport default PageFooter;","import loadable from '../utils/loadable';\n\nconst Home = loadable(() => import(/* webpackChunkName: 'home' */ '../views/home'));\n\nconst routes = [\n  { path: '/index', exact: true, name: 'Index', component: Home, auth: [1] },\n  { path: '/public/button', exact: false, name: '按钮', component: Home, auth: [1] },\n  { path: '/public/icon', exact: false, name: '图标', component: Home, auth: [1] },\n  { path: '/nav/dropdown', exact: false, name: '下拉菜单', component: Home },\n  { path: '/nav/menu', exact: false, name: '下拉菜单', component: Home },\n  { path: '/nav/steps', exact: false, name: '步骤条', component: Home },\n  { path: '/form/base-form', exact: false, name: '表单', component: Home },\n  { path: '/form/step-form', exact: false, name: '表单', component: Home },\n  { path: '/show/table', exact: false, name: '表格', component: Home },\n  { path: '/show/collapse', exact: false, name: '折叠面板', component: Home },\n  { path: '/show/tree', exact: false, name: '树形控件', component: Home },\n  { path: '/show/tabs', exact: false, name: '标签页', component: Home },\n  { path: '/others/progress', exact: false, name: '进度条', component: Home, auth: [1] },\n  { path: '/others/animation', exact: false, name: '动画', component: Home, auth: [1] },\n  { path: '/others/editor', exact: false, name: '富文本', component: Home, auth: [1] },\n  { path: '/others/upload', exact: false, name: '上传', component: Home, auth: [1] },\n  { path: '/one/two/three', exact: false, name: '三级', component: Home },\n  { path: '/about', exact: false, name: '关于', component: Home, auth: [1] }\n]\n\nexport default routes;","import React, { Component } from 'react';\nimport { Route, Switch, Redirect, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Layout, BackTop, message } from \"antd\";\nimport { menuToggleAction } from \"../store/actionCreators\";\nimport menuConfig from \"./menuConfig\";\nimport avatarUrl from \"../assets/images/user.jpg\";\nimport \"../style/layout.scss\";\nimport PageHeader from \"./header\";\nimport PageSide from \"./side\";\nimport PageFooter from \"./footer\";\nimport routes from '../routes';\n\nconst { Content } = Layout;\n\nclass PageLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      avatarUrl,\n      menu: []\n    };\n  }\n\n  componentDidMount() {\n    this.checkLogin();\n  }\n\n  componentDidUpdate() {\n    // const { pathname } = this.props.location;\n  }\n\n  checkLogin = () => {\n    const loginInfo = this.getLoginInfo();\n    loginInfo && loginInfo.username\n      ? this.setState({ menu: this.genMenu(menuConfig) })\n      : this.goToLogin();\n  }\n\n  loginOut = () => {\n    localStorage.removeItem('loginInfo');\n    this.goToLogin();\n    message.success('退出成功');\n  }\n\n  goToLogin = () => {\n    this.props.history.push('/login');\n  }\n\n  getLoginInfo = () => {\n    return JSON.parse(localStorage.getItem('loginInfo')) || {};\n  }\n\n  genMenu = (menuConfig) => {\n    const loginInfo = this.getLoginInfo();\n    const { auth } = loginInfo;\n    if (!auth) return menuConfig;\n    const travel = (node = {}, auth, valid = v => v) => {\n      if (node && node.subs && node.subs.length > 0) {\n        node.subs = node.subs.concat();\n        node.subs = node.subs.filter(item => valid(auth, item));\n        node.subs.forEach(item => travel(item, auth, valid));\n      }\n    };\n    return menuConfig.filter(item => {\n      const { auth: authList = [] } = item;\n      if (authList.includes(auth)) return false;\n      item = { ...item };\n      travel(item, auth, (auth, node) => Array.isArray(node.auth) ? node.auth.includes(auth) : true);\n      return true;\n    })\n  }\n\n  render() {\n    const { menuClick, menuToggle } = this.props;\n    const { auth } = this.getLoginInfo();\n    const { menu, avatarUrl } = this.state;\n    return (\n      <Layout className=\"app\">\n        <PageSide\n          collapsible\n          menuToggle={menuToggle}\n          menu={menu}\n        />\n        <Layout style={{ marginLeft: menuToggle ? 80 : 200, minHeight: '100vh'}}>\n          <PageHeader\n            menuToggle={menuToggle}\n            menuClick={menuClick}\n            avatar={avatarUrl}\n            loginOut={this.loginOut}\n          />\n          <Content className=\"app-content\">\n            <Switch>\n              {\n                routes.map(item => {\n                  const { path, exact, auth: authList } = item;\n                  return (\n                    <Route\n                      key={path}\n                      path={path}\n                      exact={exact}\n                      render={ props => {\n                        return (!auth || (authList && authList.includes(auth)))\n                          ? <item.component {...props} />\n                          : <Redirect to = '/404' {...props} /> // TODO: 增加 403\n                      }}>\n                    </Route>\n                  )\n                })\n              }\n              <Redirect to='/404' />\n            </Switch>\n          </Content>\n          <PageFooter />\n        </Layout>\n        <BackTop />\n      </Layout>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  menuToggle: state.menuToggle\n});\n\nconst mapDispatchToProps = dispatch => ({\n  menuClick() {\n    dispatch(menuToggleAction())\n  }\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PageLayout));","import { MENU_TOGGLE } from './actionType';\n\nconst menuToggleAction = () => ({\n  type: MENU_TOGGLE\n});\n\nexport { menuToggleAction }\n\n"],"sourceRoot":""}